<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account Number</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
    <div class="mt-5 d-flex flex-column align-items-center justify-content-center w-100">
            <h1 class="fs-1 text-danger-emphasis">SwiftPay</h1>
            <div id="loadIng"></div>
            <p class="fs-1" style="margin-top: 150px;">Your Account Number is</p>
            <div class="w-50 bg-body-secondary text-center fs-1 p-3">
                <div id="divLoad"><video src="https://s3.scoopwhoop.com/anj/loading/594155876.gif"></video></div>
                <p id="acctNo"></p>
            </div>
            <button id="nextBtn" class="btn btn-danger w-75 py-2" style="margin-top: 300px;">NEXT</button>
            <p class="mt-2 fs-6">This is your unique SwiftNumber</p>
    </div>
</body>
<script>
    
</script>
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
    import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-database.js";
   
    const firebaseConfig = {
        apiKey: "AIzaSyBs8xzZ_NImJb45cGgURPSfsYP42hn5yNw",
        authDomain: "sqi-level-two-project.firebaseapp.com",
        databaseURL: "https://sqi-level-two-project-default-rtdb.firebaseio.com",
        projectId: "sqi-level-two-project",
        storageBucket: "sqi-level-two-project.appspot.com",
        messagingSenderId: "543903052576",
        appId: "1:543903052576:web:e276b5d2b7175fcabddd45",
        measurementId: "G-XSLF84G9DK"
    };

    let loadIng = document.getElementById("loadIng")
    // let divLoad = document.getElementById("divLoad")
    let acctNo = document.getElementById("acctNo")

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    
    window.addEventListener('load', function () {
        
        // let loadInterval = setInterval(() =>{
        //     divLoad.innerHTML = `
            
        //     `;
        // })

        let firstInterval = setInterval(() => {
            let x = Math.floor((Math.random(0o0) * 999999999) + 1);
            acctNo.innerHTML = x;
        }, 5000)

        let firstTimeout = setTimeout(() => {
            clearInterval(firstInterval)
        }, 7000)

        set(ref(db, "acctNo/" + UserInformation.firstName), acctNo)
            .then(() => {
                alert ("Acct Number saved")
            })
            .catch((error) => {
                alert("Error Occured while saving data");
            });
        let RetrieveUserInformation = () => {
            onValue(ref(db, "userInformation/"), (UserInformation) => {
                const user = allStudents.val();
                console.log("All Students : ", students);
            });
        };
    });

    let nextBtn = document.getElementById("nextBtn")

    nextBtn.addEventListener('click', ()=>{
        window.location.href = "Dashboard.html";
    })
</script>
</html>